version: v1.0
name: DedMoroz Tests
agent:
  machine:
    type: small
    os_image: ubuntu20.04
blocks:
  - name: Build and Test
    task:
      prologue:
        - sudo apt-get update -yq
        - sudo apt-get install -yq apt-transport-https
        - curl -sSL https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb | sudo apt-key add -
        - sudo apt-get install -yq packages-microsoft-prod
        - sudo apt-get update -yq
        - sudo apt-get install -yq dotnet-sdk-3.1
        - mkdir -p DedMoroz/DedMoroz/bin/Debug/netcoreapp3.1
        - mkdir -p DedMoroz/Tests/bin/Debug/netcoreapp3.1
      steps:
        - checkout
        - restore:
            solution: DedMoroz/DedMoroz.sln
        - build:
            solution: DedMoroz/DedMoroz.sln
            configuration: Debug
        - test:
            project: DedMoroz/Tests/DedMoroz.Tests.csproj
            configuration: Debug
            #Optional: specify test runner if needed (e.g., MSTest, xUnit)
            #test_runner: MSTest
